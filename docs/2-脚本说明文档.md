å½“ç„¶å¯ä»¥ï¼Œä»¥ä¸‹æ˜¯ä¸ºä½ è¿™ä»½ Kind ç®¡ç†è„šæœ¬å†™çš„ä¸€ä»½**ä½¿ç”¨è¯´æ˜æ–‡æ¡£**ï¼Œå¯ä½œä¸º `README.md` æˆ–å†…éƒ¨æ–‡æ¡£ä½¿ç”¨ï¼š

------

# ğŸš€ Kind ç®¡ç†è„šæœ¬è¯´æ˜æ–‡æ¡£

æœ¬è„šæœ¬æ˜¯ä¸€ä¸ªä¾¿æ·çš„å·¥å…·ï¼Œå¸®åŠ©ä½ å¿«é€Ÿåˆ›å»ºã€ç®¡ç†å’Œè¯Šæ–­åŸºäº [Kind (Kubernetes IN Docker)](https://kind.sigs.k8s.io/) çš„æœ¬åœ° Kubernetes é›†ç¾¤ï¼Œå¹¶æ”¯æŒæ¨¡æ¿ç®¡ç†ã€é•œåƒåŠ è½½ã€kubeconfig å¯¼å‡ºç­‰åŠŸèƒ½ã€‚

------

## ğŸ“¦ åŠŸèƒ½ä¸€è§ˆ

- åˆ›å»º Kind é›†ç¾¤ï¼Œæ”¯æŒä½¿ç”¨é•œåƒå’Œæ¨¡æ¿é…ç½®
- åˆ é™¤é›†ç¾¤
- åˆ—å‡ºå’Œåˆ‡æ¢å½“å‰é›†ç¾¤
- å¯¼å‡º kubeconfig
- åŠ è½½æœ¬åœ° Docker é•œåƒåˆ°é›†ç¾¤
- æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶æ€
- å®‰è£…å¯é€‰ç»„ä»¶ï¼ˆå¦‚ Metrics Server å’Œ Ingress Controllerï¼‰
- æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿é…ç½®ï¼ˆé›†ç¾¤ç»“æ„ï¼‰
- æ”¯æŒ demo åº”ç”¨è¿è¡ŒçŠ¶æ€æ£€æŸ¥

------

## ğŸ“„ è„šæœ¬ä½¿ç”¨æ–¹æ³•

```bash
./kind-manager.sh [command] [options]
```

### ğŸ”§ å¯ç”¨å‘½ä»¤

| å‘½ä»¤                                                         | æè¿°                                    |
| ------------------------------------------------------------ | --------------------------------------- |
| `create <cluster-name> [--image <image>] [--config <template>] [--default]` | åˆ›å»ºä¸€ä¸ªæ–°çš„ Kind é›†ç¾¤                  |
| `delete <cluster-name>`                                      | åˆ é™¤æŒ‡å®šé›†ç¾¤                            |
| `export-kubeconfig <cluster-name>`                           | å¯¼å‡º kubeconfig åˆ°æœ¬åœ°æ–‡ä»¶              |
| `load-image <cluster-name> <image>`                          | å‘æŒ‡å®šé›†ç¾¤åŠ è½½æœ¬åœ° Docker é•œåƒ          |
| `status <cluster-name>`                                      | æ£€æŸ¥é›†ç¾¤æ˜¯å¦å­˜åœ¨                        |
| `list`                                                       | åˆ—å‡ºå½“å‰æ‰€æœ‰ Kind é›†ç¾¤                  |
| `use <cluster-name>`                                         | åˆ‡æ¢ `kubectl` ä¸Šä¸‹æ–‡åˆ°æŒ‡å®šé›†ç¾¤         |
| `health-check`                                               | æ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼ˆèŠ‚ç‚¹ã€ç»„ä»¶ã€Demo åº”ç”¨ç­‰ï¼‰ |
| `cluster-demo-setting list`                                  | æŸ¥çœ‹æ‰€æœ‰æ”¯æŒçš„æ¨¡æ¿åç§°                  |
| `cluster-demo-setting show <template-name>`                  | å±•ç¤ºæŒ‡å®šæ¨¡æ¿é…ç½®å†…å®¹                    |
| `help`                                                       | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯                            |

------

## ğŸ§© åˆ›å»ºé›†ç¾¤ç”¨æ³•è¯¦è§£

```bash
./kind-manager.sh create my-cluster --image kindest/node:v1.24.3 --config ingress-cluster-demo
```

å¯é€‰å‚æ•°è¯´æ˜ï¼š

| å‚æ•°        | æè¿°                                              |
| ----------- | ------------------------------------------------- |
| `--image`   | æŒ‡å®š Kind ä½¿ç”¨çš„èŠ‚ç‚¹é•œåƒ                          |
| `--config`  | ä½¿ç”¨æŒ‡å®šæ¨¡æ¿ï¼ˆä½äº `cluster-demo-setting/` ç›®å½•ï¼‰ |
| `--default` | ä½¿ç”¨é»˜è®¤é•œåƒï¼š`kindest/node:v1.24.3`              |

> ç¤ºä¾‹ä¼šä½¿ç”¨æ¨¡æ¿ `ingress-cluster-demo.yaml` åˆ›å»ºä¸€ä¸ªåŒ…å« ingress é…ç½®çš„é›†ç¾¤ã€‚

------

## ğŸ“ æ¨¡æ¿æœºåˆ¶è¯´æ˜

æ¨¡æ¿æ–‡ä»¶åº”æ”¾åœ¨ `cluster-demo-setting/` ç›®å½•ä¸‹ï¼Œæ¯ä¸ªæ¨¡æ¿æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Kind é…ç½® YAML æ–‡ä»¶ã€‚

ç¤ºä¾‹ç»“æ„ï¼š

```
cluster-demo-setting/
â”œâ”€â”€ basic.yaml
â”œâ”€â”€ ingress-cluster-demo.yaml
â””â”€â”€ multi-node.yaml
```

ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ¨¡æ¿ï¼š

```bash
./kind-manager.sh cluster-demo-setting list
./kind-manager.sh cluster-demo-setting show ingress-cluster-demo
```

------

## ğŸ› ï¸ å¸¸è§æ“ä½œç¤ºä¾‹

### åˆ›å»ºå¹¶å®‰è£… ingress å’Œ metrics-serverï¼š

ä½ å¯ä»¥ä¿®æ”¹è„šæœ¬é¡¶éƒ¨å˜é‡æ¥è‡ªåŠ¨å®‰è£…è¿™äº›ç»„ä»¶ï¼š

```bash
WITH_METRICS=true
WITH_INGRESS=true
```

ç„¶åè¿è¡Œï¼š

```bash
./kind-manager.sh create my-cluster --default --config ingress-cluster-demo
```

------

### åŠ è½½ Docker é•œåƒåˆ°é›†ç¾¤ï¼š

```bash
docker build -t myapp:v1 .
./kind-manager.sh load-image my-cluster myapp:v1
```

------

### å¯¼å‡º kubeconfigï¼š

```bash
./kind-manager.sh export-kubeconfig my-cluster
```

------

### æŸ¥çœ‹å½“å‰ä¸Šä¸‹æ–‡å’Œæ‰€æœ‰é›†ç¾¤ï¼š

```bash
./kind-manager.sh list
```

------

### æ£€æŸ¥é›†ç¾¤å¥åº·çŠ¶æ€ï¼š

```bash
./kind-manager.sh health-check
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
ğŸ§© Nodes reachable: âœ…
ğŸ“ˆ Metrics-server running: âœ…
ğŸŒ Ingress controller running: âŒ
ğŸ§ª Demo app deployed: âœ…
ğŸ›°ï¸ Ingress route configured: âœ…
```

------

## âœ… ç¯å¢ƒä¾èµ–

- å·²å®‰è£… [kind](https://kind.sigs.k8s.io/)
- å·²å®‰è£… [kubectl](https://kubernetes.io/docs/tasks/tools/)

------

## ğŸ’¡ è¿›é˜¶å»ºè®®

ä½ å¯ä»¥ç»“åˆ `Makefile`ã€`tmux`ã€`watch` ç­‰å·¥å…·ï¼ŒæŠŠè¿™ä¸ªè„šæœ¬çº³å…¥ä½ çš„æœ¬åœ°å¼€å‘è‡ªåŠ¨åŒ–æµç¨‹ä¸­ã€‚

------

å¦‚æœä½ éœ€è¦æˆ‘ä¸ºä½ ç”Ÿæˆä¸€ä¸ª Markdown æ–‡ä»¶ç‰ˆæœ¬ã€é…å¥—çš„æ¨¡æ¿ç¤ºä¾‹æˆ–è€…å¢å¼ºè„šæœ¬åŠŸèƒ½ï¼ˆæ¯”å¦‚æ·»åŠ  Helm chart å®‰è£…æ”¯æŒï¼‰ï¼Œä¹Ÿå¯ä»¥éšæ—¶å‘Šè¯‰æˆ‘ã€‚